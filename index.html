<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Panel con Login</title>
</head>
<body>

<h2>Ingresar al sistema</h2>

<p>Escribe tu email autorizado:</p>
<input id="emailInput" type="email" placeholder="tu@email.com">
<button onclick="login()">Entrar</button>

<h3>Datos:</h3>
<pre id="dataBox">Esperando login...</pre>

<script>
  async function login() {
    const email = document.getElementById("emailInput").value.trim();

    if (!email) {
      alert("Ingresa un email");
      return;
    }

    try {
      const url = "https://script.google.com/macros/s/AKfycbxYPTzPuGgb3dVktGwqEB01-6O6pyESrNAFCazPVfgKzE14fxKOuItfVEwUzksZBooT/exec?email=" + encodeURIComponent(email);

      const res = await fetch(url);
      const data = await res.json();

      if (!data.success) {
        document.getElementById("dataBox").textContent = "NO AUTORIZADO";
        return;
      }

      document.getElementById("dataBox").textContent =
        JSON.stringify(data.data, null, 2);

    } catch (e) {
      document.getElementById("dataBox").textContent = "Error conectando";
    }
  }
</script>

</body>
</html>
