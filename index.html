<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Panel Protegido</title>
</head>
<body>

<h2>Ingreso</h2>

<p>Escribe tu email autorizado:</p>
<input id="emailInput" type="email" placeholder="tuemail@gmail.com">
<button onclick="login()">Entrar</button>

<hr>

<h2>Datos</h2>
<pre id="dataBox">Esperando login...</pre>

<script>
  async function login() {
    const email = document.getElementById("emailInput").value.trim();

    if (email === "") {
      alert("Escribe un email.");
      return;
    }

    try {
      const url =
        "https://script.google.com/macros/s/AKfycbx6j4DwX9zpE7zzPhifTMbpuDWcmUtM35agL48qhhb8ABY29y1IWc2ayAxMBMfyTPXH/exec"
        + "?email=" + encodeURIComponent(email);

      const res = await fetch(url);
      const data = await res.json();

      if (!data.success) {
        document.getElementById("dataBox").textContent = "NO AUTORIZADO";
        return;
      }

      document.getElementById("dataBox").textContent =
        JSON.stringify(data.data, null, 2);

    } catch (e) {
      document.getElementById("dataBox").textContent = "Error conectando";
    }
  }
</script>

</body>
</html>

